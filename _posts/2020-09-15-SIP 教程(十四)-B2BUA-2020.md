---
layout:     post
title:      "SIP 教程(十四) B2BUA, 2020"
subtitle:   "SIP"
date:       2020-09-15 08:54:00
author:     "Ruer"
header-img: "img/bg/hello_world.jpg"
catalog: true
tags:
    - SIP
---

背靠背用户代理(B2BUA)是 SIP 应用程序中的逻辑网络元素。它是一种 SIP UA，它接收 SIP 请求，然后重新格式化请求，并将其作为新请求发送出去。

与代理服务器不同，它维护对话状态，并且必须参与在其建立的对话框上发送的所有请求。B2BUA 打破了 SIP 的端到端性质。

## 如何工作

B2BUA 代理在电话呼叫的两个端点之间操作，并且将通信信道划分为两个呼叫分支。B2BUA 是 UAC 和 UAS 的串联。它参与呼叫两端之间的所有 SIP 信令，它已经建立。由于对话服务提供商中可用的 B2BUA 可以实现一些增值特征。

在始发呼叫段中，B2BUA 充当用户代理服务器(UAS)，并将该请求作为用户代理客户端(UAC)处理到目的地端，处理端点之间的信令。

B2BUA 维护其处理的调用的完整状态。B2BUA 的每一侧作为 RFC 3261 中规定的标准 SIP 网络元件操作。

## 功能

B2BUA 提供以下功能：

* 呼叫管理(计费，自动呼叫断开，呼叫转移等)
* 网络互通(可能与协议适配)
* 隐藏网络内部(私有地址，网络拓扑等)

通常，B2BUA 也在媒体网关中实现以桥接媒体流以完全控制会话。

## 示例

许多专用交换机(PBX)企业电话系统包含 B2BUA 逻辑。

一些防火墙内置了 ALG(应用层网关)功能，允许防火墙授权 SIP 和媒体流量，同时仍然保持高水平的安全性。

另一种常见类型的 B2BUA 称为会话边界控制器(SBC)。